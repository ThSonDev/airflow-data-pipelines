[2025-10-31T05:00:08.273+0700] {local_task_job_runner.py:120} INFO - ::group::Pre task execution logs
[2025-10-31T05:00:08.293+0700] {taskinstance.py:2073} INFO - Dependencies all met for dep_context=non-requeueable deps ti=<TaskInstance: absa_streaming_lifecycle_demo11.retrain_model scheduled__2025-10-30T21:00:00+00:00 [queued]>
[2025-10-31T05:00:08.299+0700] {taskinstance.py:2073} INFO - Dependencies all met for dep_context=requeueable deps ti=<TaskInstance: absa_streaming_lifecycle_demo11.retrain_model scheduled__2025-10-30T21:00:00+00:00 [queued]>
[2025-10-31T05:00:08.300+0700] {taskinstance.py:2303} INFO - Starting attempt 1 of 2
[2025-10-31T05:00:08.314+0700] {taskinstance.py:2327} INFO - Executing <Task(BashOperator): retrain_model> on 2025-10-30 21:00:00+00:00
[2025-10-31T05:00:08.328+0700] {warnings.py:110} WARNING - /home/***/.local/lib/python3.12/site-packages/***/task/task_runner/standard_task_runner.py:61: DeprecationWarning: This process (pid=25397) is multi-threaded, use of fork() may lead to deadlocks in the child.
  pid = os.fork()

[2025-10-31T05:00:08.330+0700] {standard_task_runner.py:63} INFO - Started process 25469 to run task
[2025-10-31T05:00:08.330+0700] {standard_task_runner.py:90} INFO - Running: ['***', 'tasks', 'run', 'absa_streaming_lifecycle_demo11', 'retrain_model', 'scheduled__2025-10-30T21:00:00+00:00', '--job-id', '28', '--raw', '--subdir', 'DAGS_FOLDER/absa_streaming_lifecycle_dag1.py', '--cfg-path', '/tmp/tmp70ml_rp7']
[2025-10-31T05:00:08.333+0700] {standard_task_runner.py:91} INFO - Job 28: Subtask retrain_model
[2025-10-31T05:00:08.383+0700] {task_command.py:426} INFO - Running <TaskInstance: absa_streaming_lifecycle_demo11.retrain_model scheduled__2025-10-30T21:00:00+00:00 [running]> on host be079b239c4c
[2025-10-31T05:00:08.474+0700] {taskinstance.py:2644} INFO - Exporting env vars: AIRFLOW_CTX_DAG_OWNER='***' AIRFLOW_CTX_DAG_ID='absa_streaming_lifecycle_demo11' AIRFLOW_CTX_TASK_ID='retrain_model' AIRFLOW_CTX_EXECUTION_DATE='2025-10-30T21:00:00+00:00' AIRFLOW_CTX_TRY_NUMBER='1' AIRFLOW_CTX_DAG_RUN_ID='scheduled__2025-10-30T21:00:00+00:00'
[2025-10-31T05:00:08.477+0700] {taskinstance.py:430} INFO - ::endgroup::
[2025-10-31T05:00:08.478+0700] {subprocess.py:63} INFO - Tmp dir root location: /tmp
[2025-10-31T05:00:08.478+0700] {subprocess.py:75} INFO - Running command: ['/usr/bin/bash', '-c', 'bash -c "set -euo pipefail; python /opt/***/projects/absa_streaming/scripts/retrain.py"']
[2025-10-31T05:00:08.501+0700] {subprocess.py:86} INFO - Output:
[2025-10-31T05:00:19.460+0700] {subprocess.py:93} INFO - /home/***/.local/lib/python3.12/site-packages/transformers/optimization.py:588: FutureWarning: This implementation of AdamW is deprecated and will be removed in a future version. Use the PyTorch implementation torch.optim.AdamW instead, or set `no_deprecation_warning=True` to disable this warning
[2025-10-31T05:00:19.461+0700] {subprocess.py:93} INFO -   warnings.warn(
[2025-10-31T05:05:16.751+0700] {subprocess.py:93} INFO - ==> Khởi động retrain.py (train=TRAIN; VAL chỉ hỗ trợ; quyết định dựa trên TEST cuối).
[2025-10-31T05:05:16.763+0700] {subprocess.py:93} INFO - [Info] F1_macro tốt nhất đã log: 1.0000
[2025-10-31T05:05:16.763+0700] {subprocess.py:93} INFO - [Info] VAL: /opt/***/projects/absa_streaming/data/val_data.csv (rows=936)
[2025-10-31T05:05:16.764+0700] {subprocess.py:93} INFO - [Info] ✅ Loaded model tốt nhất hiện tại: /opt/***/models/newer_models/best_absa_2/model.pt
[2025-10-31T05:05:16.765+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:05:16.765+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:05:16.765+0700] {subprocess.py:93} INFO - [Epoch 2] time=29.6s | train_loss=0.0001 | VAL: loss=0.0001 acc=1.0000 f1_macro=1.0000 pre_macro=1.0000 rec_macro=1.0000
[2025-10-31T05:05:16.765+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:05:16.766+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:05:16.766+0700] {subprocess.py:93} INFO - [Epoch 4] time=29.6s | train_loss=0.0000 | VAL: loss=0.0000 acc=1.0000 f1_macro=1.0000 pre_macro=1.0000 rec_macro=1.0000
[2025-10-31T05:05:16.766+0700] {subprocess.py:93} INFO - [FINAL TEST] loss=0.0000 | acc=1.0000 | f1_macro=1.0000 | pre_macro=1.0000 | rec_macro=1.0000
[2025-10-31T05:05:16.766+0700] {subprocess.py:93} INFO - [NO SAVE] TEST f1_macro=1.0000 không vượt mốc best=1.0000. Không insert, không lưu model.
[2025-10-31T05:05:16.766+0700] {subprocess.py:93} INFO - ==> Retrain hoàn tất.
[2025-10-31T05:05:21.075+0700] {subprocess.py:97} INFO - Command exited with return code 0
[2025-10-31T05:05:21.101+0700] {taskinstance.py:441} INFO - ::group::Post task execution logs
[2025-10-31T05:05:21.216+0700] {taskinstance.py:1205} INFO - Marking task as SUCCESS. dag_id=absa_streaming_lifecycle_demo11, task_id=retrain_model, execution_date=20251030T210000, start_date=20251030T220008, end_date=20251030T220521
[2025-10-31T05:05:21.328+0700] {local_task_job_runner.py:240} INFO - Task exited with return code 0
[2025-10-31T05:05:21.653+0700] {taskinstance.py:3482} INFO - 0 downstream tasks scheduled from follow-on schedule check
[2025-10-31T05:05:21.686+0700] {local_task_job_runner.py:222} INFO - ::endgroup::
[2025-10-31T05:29:45.097+0700] {local_task_job_runner.py:120} INFO - ::group::Pre task execution logs
[2025-10-31T05:29:45.123+0700] {taskinstance.py:2073} INFO - Dependencies all met for dep_context=non-requeueable deps ti=<TaskInstance: absa_streaming_lifecycle_demo11.retrain_model scheduled__2025-10-30T21:00:00+00:00 [queued]>
[2025-10-31T05:29:45.131+0700] {taskinstance.py:2073} INFO - Dependencies all met for dep_context=requeueable deps ti=<TaskInstance: absa_streaming_lifecycle_demo11.retrain_model scheduled__2025-10-30T21:00:00+00:00 [queued]>
[2025-10-31T05:29:45.131+0700] {taskinstance.py:2303} INFO - Starting attempt 1 of 2
[2025-10-31T05:29:45.143+0700] {taskinstance.py:2327} INFO - Executing <Task(BashOperator): retrain_model> on 2025-10-30 21:00:00+00:00
[2025-10-31T05:29:45.154+0700] {warnings.py:110} WARNING - /home/***/.local/lib/python3.12/site-packages/***/task/task_runner/standard_task_runner.py:61: DeprecationWarning: This process (pid=28616) is multi-threaded, use of fork() may lead to deadlocks in the child.
  pid = os.fork()

[2025-10-31T05:29:45.155+0700] {standard_task_runner.py:63} INFO - Started process 28708 to run task
[2025-10-31T05:29:45.156+0700] {standard_task_runner.py:90} INFO - Running: ['***', 'tasks', 'run', 'absa_streaming_lifecycle_demo11', 'retrain_model', 'scheduled__2025-10-30T21:00:00+00:00', '--job-id', '34', '--raw', '--subdir', 'DAGS_FOLDER/absa_streaming_lifecycle_dag1.py', '--cfg-path', '/tmp/tmpo41af4k5']
[2025-10-31T05:29:45.158+0700] {standard_task_runner.py:91} INFO - Job 34: Subtask retrain_model
[2025-10-31T05:29:45.197+0700] {task_command.py:426} INFO - Running <TaskInstance: absa_streaming_lifecycle_demo11.retrain_model scheduled__2025-10-30T21:00:00+00:00 [running]> on host be079b239c4c
[2025-10-31T05:29:45.268+0700] {taskinstance.py:2644} INFO - Exporting env vars: AIRFLOW_CTX_DAG_OWNER='***' AIRFLOW_CTX_DAG_ID='absa_streaming_lifecycle_demo11' AIRFLOW_CTX_TASK_ID='retrain_model' AIRFLOW_CTX_EXECUTION_DATE='2025-10-30T21:00:00+00:00' AIRFLOW_CTX_TRY_NUMBER='1' AIRFLOW_CTX_DAG_RUN_ID='scheduled__2025-10-30T21:00:00+00:00'
[2025-10-31T05:29:45.270+0700] {taskinstance.py:430} INFO - ::endgroup::
[2025-10-31T05:29:45.271+0700] {subprocess.py:63} INFO - Tmp dir root location: /tmp
[2025-10-31T05:29:45.271+0700] {subprocess.py:75} INFO - Running command: ['/usr/bin/bash', '-c', 'bash -c "set -euo pipefail; python /opt/***/projects/absa_streaming/scripts/retrain.py"']
[2025-10-31T05:29:45.287+0700] {subprocess.py:86} INFO - Output:
[2025-10-31T05:29:53.108+0700] {subprocess.py:93} INFO - /home/***/.local/lib/python3.12/site-packages/transformers/optimization.py:588: FutureWarning: This implementation of AdamW is deprecated and will be removed in a future version. Use the PyTorch implementation torch.optim.AdamW instead, or set `no_deprecation_warning=True` to disable this warning
[2025-10-31T05:29:53.108+0700] {subprocess.py:93} INFO -   warnings.warn(
[2025-10-31T05:30:58.321+0700] {subprocess.py:93} INFO - /opt/***/projects/absa_streaming/scripts/retrain.py:374: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
[2025-10-31T05:30:58.359+0700] {subprocess.py:93} INFO -   "saved_at": datetime.utcnow().isoformat(),
[2025-10-31T05:30:58.529+0700] {subprocess.py:93} INFO - ==> Khởi động retrain.py (train=TRAIN; VAL chỉ hỗ trợ; quyết định dựa trên TEST cuối).
[2025-10-31T05:30:58.531+0700] {subprocess.py:93} INFO - [Info] F1_macro tốt nhất đã log: 0.0000
[2025-10-31T05:30:58.532+0700] {subprocess.py:93} INFO - [Info] VAL: /opt/***/projects/absa_streaming/data/val_data.csv (rows=936)
[2025-10-31T05:30:58.533+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:30:58.534+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:30:58.534+0700] {subprocess.py:93} INFO - [Epoch 2] time=15.5s | train_loss=0.0029 | VAL: loss=0.0016 acc=1.0000 f1_macro=1.0000 pre_macro=1.0000 rec_macro=1.0000
[2025-10-31T05:30:58.535+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:30:58.535+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:30:58.535+0700] {subprocess.py:93} INFO - [Epoch 4] time=15.5s | train_loss=0.0023 | VAL: loss=0.0013 acc=1.0000 f1_macro=1.0000 pre_macro=1.0000 rec_macro=1.0000
[2025-10-31T05:30:58.536+0700] {subprocess.py:93} INFO - [FINAL TEST] loss=0.0013 | acc=1.0000 | f1_macro=1.0000 | pre_macro=1.0000 | rec_macro=1.0000
[2025-10-31T05:30:58.537+0700] {subprocess.py:93} INFO - [SAVE] TEST f1_macro improved (0.0000 -> 1.0000). Saved to: /opt/***/models/newer_models/best_absa_1
[2025-10-31T05:30:58.537+0700] {subprocess.py:93} INFO - ==> Retrain hoàn tất.
[2025-10-31T05:31:00.234+0700] {subprocess.py:97} INFO - Command exited with return code 0
[2025-10-31T05:31:00.244+0700] {taskinstance.py:441} INFO - ::group::Post task execution logs
[2025-10-31T05:31:02.964+0700] {taskinstance.py:1205} INFO - Marking task as SUCCESS. dag_id=absa_streaming_lifecycle_demo11, task_id=retrain_model, execution_date=20251030T210000, start_date=20251030T222945, end_date=20251030T223102
[2025-10-31T05:31:03.054+0700] {local_task_job_runner.py:240} INFO - Task exited with return code 0
[2025-10-31T05:31:03.222+0700] {taskinstance.py:3482} INFO - 0 downstream tasks scheduled from follow-on schedule check
[2025-10-31T05:31:03.223+0700] {local_task_job_runner.py:222} INFO - ::endgroup::
[2025-10-31T05:50:35.634+0700] {local_task_job_runner.py:120} INFO - ::group::Pre task execution logs
[2025-10-31T05:50:35.661+0700] {taskinstance.py:2073} INFO - Dependencies all met for dep_context=non-requeueable deps ti=<TaskInstance: absa_streaming_lifecycle_demo11.retrain_model scheduled__2025-10-30T21:00:00+00:00 [queued]>
[2025-10-31T05:50:35.671+0700] {taskinstance.py:2073} INFO - Dependencies all met for dep_context=requeueable deps ti=<TaskInstance: absa_streaming_lifecycle_demo11.retrain_model scheduled__2025-10-30T21:00:00+00:00 [queued]>
[2025-10-31T05:50:35.672+0700] {taskinstance.py:2303} INFO - Starting attempt 1 of 2
[2025-10-31T05:50:35.690+0700] {taskinstance.py:2327} INFO - Executing <Task(BashOperator): retrain_model> on 2025-10-30 21:00:00+00:00
[2025-10-31T05:50:35.701+0700] {warnings.py:110} WARNING - /home/***/.local/lib/python3.12/site-packages/***/task/task_runner/standard_task_runner.py:61: DeprecationWarning: This process (pid=273) is multi-threaded, use of fork() may lead to deadlocks in the child.
  pid = os.fork()

[2025-10-31T05:50:35.702+0700] {standard_task_runner.py:63} INFO - Started process 279 to run task
[2025-10-31T05:50:35.703+0700] {standard_task_runner.py:90} INFO - Running: ['***', 'tasks', 'run', 'absa_streaming_lifecycle_demo11', 'retrain_model', 'scheduled__2025-10-30T21:00:00+00:00', '--job-id', '3', '--raw', '--subdir', 'DAGS_FOLDER/absa_streaming_lifecycle_dag1.py', '--cfg-path', '/tmp/tmpjd_ieuh0']
[2025-10-31T05:50:35.706+0700] {standard_task_runner.py:91} INFO - Job 3: Subtask retrain_model
[2025-10-31T05:50:35.748+0700] {task_command.py:426} INFO - Running <TaskInstance: absa_streaming_lifecycle_demo11.retrain_model scheduled__2025-10-30T21:00:00+00:00 [running]> on host dd5a6d0635d0
[2025-10-31T05:50:35.836+0700] {taskinstance.py:2644} INFO - Exporting env vars: AIRFLOW_CTX_DAG_OWNER='***' AIRFLOW_CTX_DAG_ID='absa_streaming_lifecycle_demo11' AIRFLOW_CTX_TASK_ID='retrain_model' AIRFLOW_CTX_EXECUTION_DATE='2025-10-30T21:00:00+00:00' AIRFLOW_CTX_TRY_NUMBER='1' AIRFLOW_CTX_DAG_RUN_ID='scheduled__2025-10-30T21:00:00+00:00'
[2025-10-31T05:50:35.839+0700] {taskinstance.py:430} INFO - ::endgroup::
[2025-10-31T05:50:35.840+0700] {subprocess.py:63} INFO - Tmp dir root location: /tmp
[2025-10-31T05:50:35.841+0700] {subprocess.py:75} INFO - Running command: ['/usr/bin/bash', '-c', 'bash -c "set -euo pipefail; python /opt/***/projects/absa_streaming/scripts/retrain.py"']
[2025-10-31T05:50:35.860+0700] {subprocess.py:86} INFO - Output:
[2025-10-31T05:50:41.139+0700] {subprocess.py:93} INFO - /home/***/.local/lib/python3.12/site-packages/huggingface_hub/file_download.py:942: FutureWarning: `resume_download` is deprecated and will be removed in version 1.0.0. Downloads always resume when possible. If you want to force a new download, use `force_download=True`.
[2025-10-31T05:50:41.139+0700] {subprocess.py:93} INFO -   warnings.warn(
[2025-10-31T05:53:09.603+0700] {subprocess.py:93} INFO - /home/***/.local/lib/python3.12/site-packages/transformers/optimization.py:588: FutureWarning: This implementation of AdamW is deprecated and will be removed in a future version. Use the PyTorch implementation torch.optim.AdamW instead, or set `no_deprecation_warning=True` to disable this warning
[2025-10-31T05:53:09.943+0700] {subprocess.py:93} INFO -   warnings.warn(
[2025-10-31T05:55:48.620+0700] {subprocess.py:93} INFO - /opt/***/projects/absa_streaming/scripts/retrain.py:374: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
[2025-10-31T05:55:49.294+0700] {subprocess.py:93} INFO -   "saved_at": datetime.utcnow().isoformat(),
[2025-10-31T05:55:59.870+0700] {subprocess.py:93} INFO - ==> Khởi động retrain.py (train=TRAIN; VAL chỉ hỗ trợ; quyết định dựa trên TEST cuối).
[2025-10-31T05:55:59.875+0700] {subprocess.py:93} INFO - [Info] F1_macro tốt nhất đã log: 0.0000
[2025-10-31T05:55:59.879+0700] {subprocess.py:93} INFO - [Info] VAL: /opt/***/projects/absa_streaming/data/val_data.csv (rows=936)
[2025-10-31T05:55:59.881+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:55:59.883+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:55:59.884+0700] {subprocess.py:93} INFO - [Epoch 2] time=16.9s | train_loss=0.0029 | VAL: loss=0.0015 acc=1.0000 f1_macro=1.0000 pre_macro=1.0000 rec_macro=1.0000
[2025-10-31T05:55:59.886+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:55:59.888+0700] {subprocess.py:93} INFO - Bắt đầu train 1 epoch
[2025-10-31T05:55:59.889+0700] {subprocess.py:93} INFO - [Epoch 4] time=12.4s | train_loss=0.0023 | VAL: loss=0.0013 acc=1.0000 f1_macro=1.0000 pre_macro=1.0000 rec_macro=1.0000
[2025-10-31T05:55:59.891+0700] {subprocess.py:93} INFO - [FINAL TEST] loss=0.0014 | acc=1.0000 | f1_macro=1.0000 | pre_macro=1.0000 | rec_macro=1.0000
[2025-10-31T05:55:59.892+0700] {subprocess.py:93} INFO - [SAVE] TEST f1_macro improved (0.0000 -> 1.0000). Saved to: /opt/***/models/newer_models/best_absa_1
[2025-10-31T05:55:59.894+0700] {subprocess.py:93} INFO - ==> Retrain hoàn tất.
[2025-10-31T05:56:02.202+0700] {subprocess.py:97} INFO - Command exited with return code 0
[2025-10-31T05:56:02.229+0700] {taskinstance.py:441} INFO - ::group::Post task execution logs
[2025-10-31T05:56:02.729+0700] {taskinstance.py:1205} INFO - Marking task as SUCCESS. dag_id=absa_streaming_lifecycle_demo11, task_id=retrain_model, execution_date=20251030T210000, start_date=20251030T225035, end_date=20251030T225602
[2025-10-31T05:56:02.917+0700] {local_task_job_runner.py:240} INFO - Task exited with return code 0
[2025-10-31T05:56:03.161+0700] {taskinstance.py:3482} INFO - 0 downstream tasks scheduled from follow-on schedule check
[2025-10-31T05:56:03.162+0700] {local_task_job_runner.py:222} INFO - ::endgroup::
